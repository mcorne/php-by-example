<?php
/**
 * PHP By Example
 *
 * @author    Michel Corne <mcorne@yahoo.com>
 * @copyright 2014 Michel Corne
 * @license   http://www.opensource.org/licenses/gpl-3.0.html GNU GPL v3
 */
?>

<h1>
  Test of all functions
  <?php require "$this->application_path/views/english_only.phtml";?>
</h1>

<div class="block blue_border">
  <table>

    <tr>
      <?php if (empty($this->functions['test_success'])):?>
        <td class="red">Functions tested successfully</td>
        <td class="red">0</td>

      <?php else:?>
        <td class="green">Functions tested successfully</td>
        <td class="green"><?=count($this->functions['test_success']);?></td>
        <td class="gray">(<?=$this->totals['test_success'];?> tests)</td>
      <?php endif;?>
    </tr>

    <tr>
      <?php if (empty($this->functions['test_failed'])):?>
        <td class="gray">Functions with failed tests</td>
        <td class="gray">-</td>

      <?php else:?>
        <td class="red">Functions with failed tests</td>
        <td class="red"><?=count($this->functions['test_failed']);?></td>
        <td class="gray">(<?=array_sum($this->test_failed_counts);?>/<?=$this->totals['test_failed'];?> tests)</td>
      <?php endif;?>
    </tr>

    <tr>
      <?php if (empty($this->functions['test_missing'])):?>
        <td class="gray">Functions with missing tests</td>
        <td class="gray">-</td>

      <?php else:?>
        <td class="orange">Functions with missing tests</td>
        <td class="orange"><?=count($this->functions['test_missing']);?></td>
      <?php endif;?>
    </tr>

    <tr>
      <?php if (empty($this->functions['test_obsolete'])):?>
        <td class="gray">Functions with obsolete tests</td>
        <td class="gray">-</td>

      <?php else:?>
        <td class="orange">Functions with obsolete tests</td>
        <td class="orange"><?=count($this->functions['test_obsolete']);?></td>
      <?php endif;?>
    </tr>

    <tr>
      <td class="gray">Functions with unvalidated tests</td>

      <?php if (empty($this->functions['test_not_validated'])):?>
        <td class="gray">-</td>

      <?php else:?>
        <td class="gray"><?=count($this->functions['test_not_validated']);?></td>
        <td class="gray">(<?=$this->totals['test_not_validated'];?> tests)</td>
      <?php endif;?>
    </tr>

    <tr>
      <td class="gray">Functions not tested</td>

      <?php if (empty($this->functions['not_tested'])):?>
        <td class="gray">-</td>

      <?php else:?>
        <td class="gray"><?=count($this->functions['not_tested']);?></td>
      <?php endif;?>
    </tr>

    <tr>
      <td class="gray">Functions not available</td>

      <?php if (empty($this->functions['not_available'])):?>
        <td class="gray">-</td>

      <?php else:?>
        <td class="gray"><?=count($this->functions['not_available']);?></td>
      <?php endif;?>
    </tr>

  </table>
</div>

<?php
if (! empty($this->functions['test_success'])) {
    $this->_output->display_tested_function_list(
        $this->functions['test_success'],
        'Functions tested successfully',
        'green',
        $this->test_count_by_function
    );
}

if (! empty($this->functions['test_failed'])) {
    $this->_output->display_tested_function_list(
        $this->functions['test_failed'],
        'Functions with failed tests',
        'red',
        $this->test_count_by_function,
        $this->test_failed_counts
    );
}

if (! empty($this->functions['test_missing'])) {
    $this->_output->display_tested_function_list(
        $this->functions['test_missing'],
        'Functions with missing tests',
        'orange',
        $this->test_count_by_function
    );
}

if (! empty($this->functions['test_obsolete'])) {
    $this->_output->display_tested_function_list(
        $this->functions['test_obsolete'],
        'Functions with obsolete tests',
        'orange',
        $this->test_count_by_function
    );
}

if (! empty($this->functions['test_not_validated'])) {
    $this->_output->display_tested_function_list(
        $this->functions['test_not_validated'],
        'Functions with unvalidated tests',
        'gray',
        $this->test_count_by_function
    );
}

if (! empty($this->functions['not_tested'])) {
    $this->_output->display_tested_function_list(
        $this->functions['not_tested'],
        'Functions not tested',
        'gray'
    );
}

if (! empty($this->functions['not_available'])) {
    $this->_output->display_tested_function_list(
        $this->functions['not_available'],
        'Functions not available',
        'gray'
    );
}
?>
